{
  "hash": "4487b5b308c86dab2ceddeda32b0beae",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Everything Palettes in R: Viridis, Brewer, and Beyond\"\nsubtitle: \"A comprehensive guide to color palettes in ggplot2\"\nexecute:\n  warning: false\n  message: false\nauthor: \"Noah Weidig\"\ndate: \"2026-02-24\"\ncategories: [code, ggplot2, dataviz, color]\ndescription: \"Master color palettes in ggplot2 — from viridis and RColorBrewer to MetBrewer, wesanderson, and more. Learn when to use continuous vs discrete scales, how to design for colorblind accessibility, and how to avoid common pitfalls.\"\ntoc: true\ntoc-depth: 2\ncode-fold: show\n---\n\nColor can make or break a figure. The right palette draws attention to the story in your data; the wrong one buries it under visual noise. In this post we will walk through the major palette ecosystems available in R, learn when to reach for each one, and pick up practical rules that keep figures readable, accessible, and honest.\n\n# Setup\n\nWe will use several packages throughout this tutorial. Install any you are missing, then load them all at once.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment to install any missing packages\n# install.packages(c(\n#   \"ggplot2\", \"dplyr\", \"scales\", \"viridis\",\n#   \"RColorBrewer\", \"colorspace\", \"paletteer\",\n#   \"scico\", \"MetBrewer\", \"wesanderson\", \"ggsci\",\n#   \"rcartocolor\", \"palmerpenguins\", \"khroma\"\n# ))\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\nlibrary(viridis)\nlibrary(RColorBrewer)\nlibrary(colorspace)\nlibrary(paletteer)\nlibrary(scico)\nlibrary(MetBrewer)\nlibrary(wesanderson)\nlibrary(ggsci)\nlibrary(rcartocolor)\nlibrary(palmerpenguins)\nlibrary(khroma)\n```\n:::\n\n\nWe will rely on the **palmerpenguins** dataset for most examples. It gives us both categorical variables (`species`, `island`) and continuous ones (`bill_length_mm`, `body_mass_g`).\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- palmerpenguins::penguins\nglimpse(penguins)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 344\nColumns: 8\n$ species           <fct> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…\n$ island            <fct> Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…\n$ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …\n$ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …\n$ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…\n$ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …\n$ sex               <fct> male, female, female, NA, female, male, female, male…\n$ year              <int> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…\n```\n\n\n:::\n:::\n\n\n# Continuous vs Discrete Color Scales\n\nBefore choosing a palette, decide whether the variable you are mapping to color is **continuous** (numeric) or **discrete** (categorical).\nIn ggplot2:\n\n- **Continuous** variables use `scale_color_*()` / `scale_fill_*()` functions that interpolate between colors.\n- **Discrete** variables use functions that assign one distinct color per level.\n\nMany palette packages offer both variants. Here is a quick comparison.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Continuous: bill length mapped to a gradient\np_cont <- ggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                                color = bill_length_mm)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_viridis_c() +\n  labs(title = \"Continuous scale\", color = \"Bill length (mm)\") +\n  theme_classic()\n\n# Discrete: species mapped to distinct colors\np_disc <- ggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                                color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_viridis_d() +\n  labs(title = \"Discrete scale\", color = \"Species\") +\n  theme_classic()\n\np_cont\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/continuous-vs-discrete-1.png){width=672}\n:::\n\n```{.r .cell-code}\np_disc\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/continuous-vs-discrete-2.png){width=672}\n:::\n:::\n\n\n**Rule of thumb:** continuous scales for numbers, discrete scales for categories.\n\n# Viridis (viridis / viridisLite)\n\nThe **viridis** family is the gold standard for perceptually uniform, colorblind-safe palettes. The colors change smoothly in lightness and chroma, so a plot printed in grayscale still makes sense.\n\n**Sub-palettes:** `viridis`, `magma`, `inferno`, `plasma`, `cividis`, `rocket`, `mako`, `turbo`.\n\n**When to use:** any time you need a safe default for continuous data, heatmaps, or ordered categories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  scale_fill_viridis_c(option = \"magma\") +\n  labs(title = \"Old Faithful eruptions — viridis magma\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/viridis-continuous-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = flipper_length_mm,\n                      fill = species)) +\n  geom_boxplot(na.rm = TRUE, show.legend = FALSE) +\n  scale_fill_viridis_d(option = \"cividis\") +\n  labs(title = \"Flipper length by species — viridis cividis\",\n       x = \"Species\", y = \"Flipper length (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/viridis-discrete-1.png){width=672}\n:::\n:::\n\n\n# RColorBrewer\n\n**RColorBrewer** provides three palette families designed by cartographer Cynthia Brewer:\n\n| Type | Purpose | Example palettes |\n|------|---------|-----------------|\n| Sequential | Low-to-high values | Blues, YlOrRd, Greens |\n| Diverging | Deviation from a midpoint | RdBu, BrBG, PiYG |\n| Qualitative | Unordered categories | Set2, Paired, Dark2 |\n\n**When to use:** you need a well-tested, publication-ready palette and want to choose the family explicitly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Display available palettes\ndisplay.brewer.all(n = 8)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/brewer-overview-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = body_mass_g)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_distiller(palette = \"YlOrRd\", direction = 1) +\n  labs(title = \"Body mass — Brewer YlOrRd (sequential)\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\",\n       color = \"Mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/brewer-sequential-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_brewer(palette = \"Set2\") +\n  labs(title = \"Species — Brewer Set2 (qualitative)\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/brewer-qualitative-1.png){width=672}\n:::\n:::\n\n\n# colorspace\n\nThe **colorspace** package lets you build palettes from scratch using perceptual color spaces (HCL). It ships ready-made palettes and diagnostic tools.\n\n**When to use:** you want fine control over hue, chroma, and luminance or need to evaluate existing palettes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g, fill = species)) +\n  geom_violin(na.rm = TRUE, show.legend = FALSE) +\n  scale_fill_discrete_qualitative(palette = \"Dark 3\") +\n  labs(title = \"Body mass — colorspace Dark 3\",\n       x = \"Species\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/colorspace-qualitative-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  scale_fill_continuous_sequential(palette = \"ag_Sunset\") +\n  labs(title = \"Old Faithful — colorspace ag_Sunset\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/colorspace-sequential-1.png){width=672}\n:::\n:::\n\n\nA powerful diagnostic: `colorspace::specplot()` shows how lightness, chroma, and hue vary across a palette.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolorspace::specplot(colorspace::sequential_hcl(256, palette = \"ag_Sunset\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/colorspace-specplot-1.png){width=672}\n:::\n:::\n\n\n# paletteer\n\n**paletteer** is a meta-package that gives you a unified interface to hundreds of palettes from dozens of packages.\n\n**When to use:** you want to browse or switch between palettes without loading each individual package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  paletteer::scale_color_paletteer_d(\"ggsci::default_jco\") +\n  labs(title = \"Species — paletteer (ggsci JCO)\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/paletteer-discrete-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = body_mass_g)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  paletteer::scale_color_paletteer_c(\"scico::batlow\", direction = -1) +\n  labs(title = \"Body mass — paletteer (scico batlow)\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\",\n       color = \"Mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/paletteer-continuous-1.png){width=672}\n:::\n:::\n\n\n# scico\n\n**scico** provides perceptually uniform, colorblind-safe scientific colour maps developed by Fabio Crameri.\n\n**When to use:** earth science, oceanography, or any continuous data where perceptual uniformity is critical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  scico::scale_fill_scico(palette = \"roma\") +\n  labs(title = \"Old Faithful — scico roma\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/scico-continuous-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = flipper_length_mm,\n                      fill = species)) +\n  geom_boxplot(na.rm = TRUE, show.legend = FALSE) +\n  scico::scale_fill_scico_d(palette = \"batlow\") +\n  labs(title = \"Flipper length — scico batlow (discrete)\",\n       x = \"Species\", y = \"Flipper length (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/scico-discrete-1.png){width=672}\n:::\n:::\n\n\n# MetBrewer\n\n**MetBrewer** offers palettes inspired by works at the Metropolitan Museum of Art. They are visually striking and still colorblind-friendly.\n\n**When to use:** presentations, posters, or publications where you want an artistic aesthetic without sacrificing readability.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  MetBrewer::scale_color_met_d(\"Lakota\") +\n  labs(title = \"Species — MetBrewer Lakota\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/metbrewer-discrete-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = bill_depth_mm)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  MetBrewer::scale_color_met_c(\"Hiroshige\") +\n  labs(title = \"Bill depth — MetBrewer Hiroshige\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\",\n       color = \"Bill depth (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/metbrewer-continuous-1.png){width=672}\n:::\n:::\n\n\n# wesanderson\n\n**wesanderson** provides palettes inspired by the films of Wes Anderson — charming pastels and earthy tones.\n\n**When to use:** informal presentations, blog graphics, or any context where personality is a plus. These are primarily discrete palettes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, y = body_mass_g, fill = species)) +\n  geom_boxplot(na.rm = TRUE, show.legend = FALSE) +\n  scale_fill_manual(values = wes_palette(\"Darjeeling1\", 3)) +\n  labs(title = \"Body mass — wesanderson Darjeeling1\",\n       x = \"Species\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/wesanderson-plot-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = flipper_length_mm,\n                      color = island)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_manual(values = wes_palette(\"GrandBudapest1\", 3)) +\n  labs(title = \"Islands — wesanderson GrandBudapest1\",\n       x = \"Bill length (mm)\", y = \"Flipper length (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/wesanderson-scatter-1.png){width=672}\n:::\n:::\n\n\n# ggsci\n\n**ggsci** provides color palettes from scientific journals and sci-fi franchises (JAMA, Lancet, NEJM, Nature, Star Trek, and more).\n\n**When to use:** journal submissions where you want colors that match the publication's own figures, or when you need a conservative, professional palette.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  ggsci::scale_color_jco() +\n  labs(title = \"Species — ggsci JCO\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/ggsci-jco-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = species, fill = island)) +\n  geom_bar(position = \"dodge\") +\n  ggsci::scale_fill_nejm() +\n  labs(title = \"Island counts by species — ggsci NEJM\",\n       x = \"Species\", y = \"Count\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/ggsci-nejm-1.png){width=672}\n:::\n:::\n\n\n# rcartocolor\n\n**rcartocolor** provides the CARTOColors palettes, designed for cartography. They include sequential, diverging, and qualitative schemes that work well in maps and standard plots alike.\n\n**When to use:** maps, geographic data, or when you want palettes designed for spatial visualization.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  rcartocolor::scale_color_carto_d(palette = \"Vivid\") +\n  labs(title = \"Species — rcartocolor Vivid\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/rcartocolor-qualitative-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  rcartocolor::scale_fill_carto_c(palette = \"SunsetDark\") +\n  labs(title = \"Old Faithful — rcartocolor SunsetDark\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/rcartocolor-continuous-1.png){width=672}\n:::\n:::\n\n\n# khroma\n\n**khroma** provides colour schemes for scientific data visualization, with a strong focus on accessibility. All palettes are designed to be distinct for people with colour vision deficiencies.\n\n**When to use:** scientific figures where accessibility is non-negotiable and you want assurance the palette has been tested for CVD safety.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  khroma::scale_color_bright() +\n  labs(title = \"Species — khroma bright\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/khroma-discrete-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = body_mass_g)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  khroma::scale_color_batlow() +\n  labs(title = \"Body mass — khroma batlow\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\",\n       color = \"Mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/khroma-continuous-1.png){width=672}\n:::\n:::\n\n\n# Handling NA Colors\n\nMissing values appear in almost every real dataset. By default ggplot2 maps `NA` to grey, but you can control this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create some NAs for demonstration\npenguins_na <- penguins |>\n  mutate(species_na = if_else(row_number() %% 10 == 0, NA_character_, as.character(species)))\n\nggplot(penguins_na, aes(x = bill_length_mm, y = body_mass_g,\n                         color = species_na)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_viridis_d(na.value = \"red\") +\n  labs(title = \"NA values shown in red\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\",\n       color = \"Species\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/na-colors-1.png){width=672}\n:::\n:::\n\n\nUse `na.value =` inside any `scale_color_*()` or `scale_fill_*()` call to set the NA color. Common choices:\n\n- `\"grey50\"` — subtle, does not draw attention\n- `\"red\"` or `\"black\"` — highlights missing data for QC\n- `NA` — removes NA points from the legend entirely\n\n# Practical Rules for Number of Colors\n\n## The 6–8 Rule\n\nHumans can reliably distinguish roughly **6 to 8** hues at a glance. Beyond that, colors start to blur together, especially in scatterplots where points overlap. Here is what happens when you push it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# mtcars has many cylinder + gear combos — let's create a busy variable\nmtcars_busy <- mtcars |>\n  mutate(car_name = rownames(mtcars))\n\nggplot(mtcars_busy, aes(x = wt, y = mpg, color = car_name)) +\n  geom_point(size = 3) +\n  labs(title = \"Too many categories — the legend is unreadable\",\n       x = \"Weight (1000 lbs)\", y = \"Miles per gallon\") +\n  theme_classic() +\n  theme(legend.text = element_text(size = 5))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/too-many-colors-1.png){width=672}\n:::\n:::\n\n\nThat is a mess. Here are your escape hatches:\n\n### Fix 1: Lump rare categories\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins_islands <- penguins |>\n  count(island, species) |>\n  mutate(label = paste(island, species, sep = \" — \"))\n\n# Works fine with a manageable number of groups\nggplot(penguins_islands, aes(x = reorder(label, n), y = n, fill = island)) +\n  geom_col(show.legend = TRUE) +\n  coord_flip() +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(title = \"Lumped into a few groups\",\n       x = NULL, y = \"Count\", fill = \"Island\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fix-lump-1.png){width=672}\n:::\n:::\n\n\n### Fix 2: Facet instead of coloring\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g)) +\n  geom_point(size = 1.5, na.rm = TRUE, color = \"steelblue\") +\n  facet_wrap(~ species) +\n  labs(title = \"Faceting removes the need for color\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fix-facet-1.png){width=672}\n:::\n:::\n\n\n### Fix 3: Use shape or linetype in addition to color\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = species, shape = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_brewer(palette = \"Dark2\") +\n  labs(title = \"Shape + color = double encoding\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fix-shape-1.png){width=672}\n:::\n:::\n\n\n### Fix 4: Highlight one group, grey the rest\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins_hl <- penguins |>\n  mutate(highlight = if_else(species == \"Chinstrap\", \"Chinstrap\", \"Other\"))\n\nggplot(penguins_hl, aes(x = bill_length_mm, y = body_mass_g,\n                         color = highlight)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_manual(values = c(\"Chinstrap\" = \"#E63946\", \"Other\" = \"grey70\")) +\n  labs(title = \"Highlighting one group against the rest\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\",\n       color = NULL) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fix-highlight-1.png){width=672}\n:::\n:::\n\n\n# Accessibility: Contrast & Colorblind-Friendly Design\n\nApproximately 8% of men and 0.5% of women have some form of color vision deficiency (CVD). Designing for accessibility is not optional — it is good science.\n\n## Key Principles\n\n1. **Never rely on color alone.** Pair color with shape, size, or labels.\n2. **Use perceptually uniform palettes.** Viridis, scico, and khroma are safe bets.\n3. **Avoid red-green contrasts.** The most common CVD type (deuteranopia) confuses red and green.\n4. **Test your palette.** The `colorspace` package can simulate what your plot looks like under different CVD types.\n\n## Simulating Color Vision Deficiency\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a base plot\np_base <- ggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                                color = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_manual(values = c(\"Adelie\" = \"#E63946\",\n                                 \"Chinstrap\" = \"#2A9D8F\",\n                                 \"Gentoo\" = \"#264653\")) +\n  labs(x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n\n# Original\np_base + labs(title = \"Original\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/cvd-simulation-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Simulate deuteranopia (red-green deficiency)\n# cvd_emulator() expects a file path, so save the plot to a temp file first\ntmp_plot <- tempfile(fileext = \".png\")\nggsave(tmp_plot, p_base + labs(title = \"Simulated deuteranopia\"),\n       width = 7, height = 5, dpi = 150)\ncolorspace::cvd_emulator(tmp_plot)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nConvert deutan          -> /var/folders/03/d3dmjds91_vckyhkgdt677300000gn/T//RtmpSVvF9F/deutan_file7e027e5356fa.png\nConvert protan          -> /var/folders/03/d3dmjds91_vckyhkgdt677300000gn/T//RtmpSVvF9F/protan_file7e027e5356fa.png\nConvert tritan          -> /var/folders/03/d3dmjds91_vckyhkgdt677300000gn/T//RtmpSVvF9F/tritan_file7e027e5356fa.png\nConvert desaturate      -> /var/folders/03/d3dmjds91_vckyhkgdt677300000gn/T//RtmpSVvF9F/desaturate_file7e027e5356fa.png\n```\n\n\n:::\n:::\n\n\nIf the simulated plot makes it hard to distinguish groups, switch to a CVD-safe palette such as viridis, `\"Okabe-Ito\"` (khroma), or Brewer's qualitative palettes.\n\n## A Safer Version\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(penguins, aes(x = bill_length_mm, y = body_mass_g,\n                      color = species, shape = species)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_viridis_d(option = \"cividis\") +\n  labs(title = \"CVD-safe: viridis cividis + shape encoding\",\n       x = \"Bill length (mm)\", y = \"Body mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/cvd-safe-1.png){width=672}\n:::\n:::\n\n\n# Common Pitfalls\n\n## Pitfall 1: The Rainbow Palette\n\nRainbow (jet) palettes are not perceptually uniform — yellow appears brighter than blue, creating false visual emphasis. They also fail under grayscale printing and for colorblind viewers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Don't do this\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  scale_fill_gradientn(colours = rainbow(256)) +\n  labs(title = \"Rainbow palette — avoid this\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-rainbow-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Do this instead\nggplot(faithfuld, aes(waiting, eruptions, fill = density)) +\n  geom_tile() +\n  scale_fill_viridis_c() +\n  labs(title = \"Viridis — perceptually uniform\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-rainbow-2.png){width=672}\n:::\n:::\n\n\n## Pitfall 2: Low-Contrast Palettes\n\nPastel-on-white palettes look washed out on screens and vanish when printed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Low contrast\nggplot(penguins, aes(x = species, y = body_mass_g, fill = species)) +\n  geom_boxplot(na.rm = TRUE, show.legend = FALSE) +\n  scale_fill_manual(values = c(\"#FFF5F5\", \"#F5FFF5\", \"#F5F5FF\")) +\n  labs(title = \"Low contrast — hard to read\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-low-contrast-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Better contrast\nggplot(penguins, aes(x = species, y = body_mass_g, fill = species)) +\n  geom_boxplot(na.rm = TRUE, show.legend = FALSE) +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(title = \"Brewer Set2 — clear contrast\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-low-contrast-2.png){width=672}\n:::\n:::\n\n\n## Pitfall 3: Diverging Scales on Non-Diverging Data\n\nDiverging palettes imply a meaningful midpoint (zero, average, threshold). Using them for data without a natural center misleads the reader.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Misleading: diverging scale on body mass (no natural midpoint)\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = body_mass_g)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_distiller(palette = \"RdBu\") +\n  labs(title = \"Diverging scale on non-diverging data — misleading\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\",\n       color = \"Mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-diverging-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Correct: sequential scale\nggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm,\n                      color = body_mass_g)) +\n  geom_point(size = 2, na.rm = TRUE) +\n  scale_color_viridis_c() +\n  labs(title = \"Sequential scale — appropriate for body mass\",\n       x = \"Bill length (mm)\", y = \"Bill depth (mm)\",\n       color = \"Mass (g)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/pitfall-diverging-2.png){width=672}\n:::\n:::\n\n\n## Pitfall 4: Too Many Categories\n\nWe covered this above, but it bears repeating: if your legend has more than 8 entries, rethink your encoding strategy. Lump, facet, highlight, or use a different visual channel.\n\n# Palette Checklist\n\nBefore you finalize a figure, run through this checklist:\n\n| # | Question | Action if \"No\" |\n|---|----------|----------------|\n| 1 | Is the variable continuous or discrete? | Switch scale type |\n| 2 | Does the palette type match the data? (sequential / diverging / qualitative) | Change palette family |\n| 3 | Are there 8 or fewer color categories? | Lump, facet, or highlight |\n| 4 | Is the palette colorblind-safe? | Use viridis, scico, or khroma |\n| 5 | Does the plot read in grayscale? | Use a perceptually uniform palette |\n| 6 | Is there enough contrast against the background? | Darken colors or switch palette |\n| 7 | Are NAs handled intentionally? | Set `na.value =` explicitly |\n| 8 | Is color the only encoding? | Add shape, size, or labels as backup |\n\n# Quick Reference: Which Package When?\n\n| Package | Best for | Continuous | Discrete |\n|---------|----------|:----------:|:--------:|\n| **viridis** | Safe default, heatmaps | Yes | Yes |\n| **RColorBrewer** | Publication-ready, classic | Yes | Yes |\n| **colorspace** | Custom HCL palettes, diagnostics | Yes | Yes |\n| **paletteer** | Browsing many packages at once | Yes | Yes |\n| **scico** | Scientific maps, earth science | Yes | Yes |\n| **MetBrewer** | Artistic, striking figures | Yes | Yes |\n| **wesanderson** | Fun, informal graphics | No | Yes |\n| **ggsci** | Journal-style figures | No | Yes |\n| **rcartocolor** | Cartography, spatial data | Yes | Yes |\n| **khroma** | Accessibility-first science | Yes | Yes |\n\n# Wrapping Up\n\nThere is no single \"best\" palette — but there are wrong ones. Start with **viridis** as a safe default, reach for **RColorBrewer** when you need classic publication palettes, and explore **MetBrewer**, **scico**, or **khroma** when you want something that is both beautiful and accessible. Always test for colorblind safety, keep your categories under 8, and never rely on color alone.\n\nHappy plotting!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}