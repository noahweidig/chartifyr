{
  "hash": "0b8981dd732655ac1f57c29efacfb325",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Basics of ggplot2\"\nsubtitle: \"A beginners guide to making figures in R\"\nexecute:\n  warning: false\nauthor: \"Noah Weidig\"\ndate: \"2025-02-13\"\ncategories: [code, ggplot2, dataviz]\nimage: \"image.jpg\"\n---\n\n\n\n[![Artwork by \\@allison_horst](images/ggplot.png)](https://twitter.com/allison_horst)\n\nNothing is worse than reading a scientific publication only to encounter muddled, overly busy figures. Clear storytelling is a cornerstone of scientific writing, and the saying “a picture is worth a thousand words” has never been more relevant. Let’s dive into creating clean, effective figures in R!\n\n# Import Data\n\nFirst, we need to make sure that *tidyverse* is installed. *ggplot* is a package within *tidyverse*, which is one of the most useful tools in R for data wrangling and visualization.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment and run this line once\n#install.packages(\"tidyverse\")\n\n# load the package\nlibrary(tidyverse)\n```\n:::\n\n\n\nNext, lets read in our data. We’ll be working with the palmer penguins dataset, which is free and publicly available.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Uncomment and run this line once\n#install.packages(\"palmerpenguins\")\nlibrary(palmerpenguins)\n\ndata <- penguins\n```\n:::\n\n\n\nFirst, let’s look at the data in a tabular form.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 344 × 8\n   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n 1 Adelie  Torgersen           39.1          18.7               181        3750\n 2 Adelie  Torgersen           39.5          17.4               186        3800\n 3 Adelie  Torgersen           40.3          18                 195        3250\n 4 Adelie  Torgersen           NA            NA                  NA          NA\n 5 Adelie  Torgersen           36.7          19.3               193        3450\n 6 Adelie  Torgersen           39.3          20.6               190        3650\n 7 Adelie  Torgersen           38.9          17.8               181        3625\n 8 Adelie  Torgersen           39.2          19.6               195        4675\n 9 Adelie  Torgersen           34.1          18.1               193        3475\n10 Adelie  Torgersen           42            20.2               190        4250\n# ℹ 334 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n\n\n:::\n:::\n\n\n\nSo there are eight columns and 344 rows. Let’s say we are interested in penguin weight. We’ll need to look at the “body_mass_g” variable.\n\n# Basic Syntax\n\nLet’s create a basic histogram to look at the distribution of this continuous variable.\n\nTo start, you call ggplot(). The first argument is our data.\n\nI could also code it with data = data, although the first argument with ggplot is always the “data = ” argument.\n\nNext we have to specify the aesthetics. Since a histogram only has an x argument (our continuous variable: body_mass_g, in our case), that’s all we need.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = data, aes(x = body_mass_g))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# or\nggplot(data, aes(body_mass_g))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\n\nHowever, this is just a blank graph. We need to specify which type of graph. In this example, we will create a histogram. Each additional “geom” is added by a “+” sign. I generally like to start a new line after each “+”.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\nNot bad! Now let’s customize it. I personally do not like the default ggplot look, so let’s try some built in themes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram() +\n  theme_linedraw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\nI prefer theme_bw() or theme_minimal(). Let’s stick with those going forward.\n\n# Get Colorful\n\nMaybe you want to change the fill color of the histogram bars. Colors in R are always specified within quotes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g)) +\n  geom_histogram(fill = \"red\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\nMaybe you want you want each species to have a different color. We’ll need to specify which variable is our fill *within* the aes().\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g, fill = species)) +\n  geom_histogram() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\nGreat! But these are stacked bars. We want them to overlap.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g, fill = species)) +\n  geom_histogram(position = \"identity\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\nBut we can’t quite see some of the bars that overlap. Let’s change the transparency (alpha).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g, fill = species)) +\n  geom_histogram(position = \"identity\", alpha = 0.7) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\nMuch better!\n\n# Labeling Your Graph\n\nThe x and y-axes aren’t very pretty right now. Let’s change that. We’ll use labs().\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data, aes(x = body_mass_g, fill = species)) +\n  geom_histogram(position = \"identity\",\n                              alpha = 0.7) +\n  theme_minimal() +\n  labs(x = \"Body Mass (g)\",\n          y = \"Frequency\",\n          fill = \"Species\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n# Other geoms\n\nSince this is a basic introduction to ggplot, we will not go into all the other geoms. However, there are several other types of graphs you can make:\n\n-   `geom_bar`: *bar graphs*\n\n-   `geom_point`: *scatterplots*\n\n-   `geom_line`: *linegraphs*\n\n-   `geom_text`: *adding text to your figure*\n\n-   And so many more!\n\n## Exporting Figures\n\nNow let’s save our figure. Most journals require between 300-600 dots per inch (dpi).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(\"penguins_histogram.jpg\", width = 5, height = 3, dpi = 300)\n```\n:::\n\n\n\nAnd that’s it! Thanks for reading! Look out for more R tutorials.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}